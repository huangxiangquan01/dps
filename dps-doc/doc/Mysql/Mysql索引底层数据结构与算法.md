# 索引数据结构
###  二叉树
- 自增主键， 退化为为链表

###   红黑树
- 数据量大， 树高问题
###  Hash表
- 对索引的key进行一次hash计算就可以定位出数据存储的位置
- 很多时候Hash索引要比B+ 树索引更高效
- 仅能满足 “=”，“IN”，不支持范围查询
- hash冲突问题
### B-Tree
- 叶节点具有相同的深度， 叶节点之间指针为空
- 所有索引元素不重复
- 节点中的数据索引从左到右递增排列
###  B+Tree
- 非叶子节点不存储data，只存储索引(冗余)，可以放更多的索引
- 叶子节点包含所有索引字段
- 叶子节点用指针连接，提高区间访问的性能

### Mysql存储索引的特点
- 查看Mysql一个存储节点的默认大小，默认16kb
- Mysql索引指针的大小：6b
- Int整型的大小：8b
- 一个节点大概可以存储1170个索引元素(单行数据1k的情况，表数据大于2100W)

# MyISAM
- MyISAM引擎使用B+Tree作为索引结构
- 叶节点的data域存放的是数据记录的地址

# InnoDB
### 实现
- 表数据文件本身就是按B+Tree组织的一个索引结构文件
- 聚集索引-叶节点包含了完整的数据记录
- 为什么InnoDB表必须有主键，并且推荐使用整型的自增主键？
  1. 必须有主键索引存储B+Tree，如果建表没有主键，Mysql会找一列可以作为唯一索引的或维护一个隐藏的rowId的字段，作为主键索引。
  1. 因为索引查找涉及到大量的比较，整型比较的时候速度快，整型占用空间较少，自增的索引元素，插入性能较高，只需要往后面进行元素存储，如果前面的节点已经满了16KB，中间插入非常慢，涉及运算较多（节点分裂，树平衡等）
  
- 为什么非主键索引结构叶子节点存储的是主键值？(一致性和节省存储空间)
  插入数据之前需要维护索引，需要保证索引的一致性，只需要维护一份完整数据
  
###联合索引 
联合索引是由多个字段组成的索引。

### 重复索引
一个字段上建立多个索引。

### 冗余索引
指多个索引的前缀列相同，或者在联合索引中包含了主键的索引 。
  
  
|      | InnoDB  | MyISAM  |
|  :----  | :----  | :----  |
| 单元格  | 单元格 | 单元格 |
| 单元格  | 单元格 | 单元格 |

